# OpenClaw 深度使用手册

> **Version**: 1.0
> **Author**: Atlas
> **Date**: 2026-02-02
> **Status**: Living Document

## 1. 简介 (Introduction)

**OpenClaw** 不仅仅是一个聊天机器人，它是一个 **Agent Operating System (智能体操作系统)**。它运行在您的本地环境中，充当连接大模型（LLM）与现实世界（文件、终端、浏览器、智能设备）的桥梁。

### 核心哲学
-   **Local First**: 核心逻辑和数据运行在本地 Gateway，保护隐私。
-   **Tool-Centric**: 通过 "Skills" (技能) 扩展能力，一切皆可调用。
-   **Multi-Agent**: 支持主从架构，可以生成子 Agent 并行处理任务。

---

## 2. 核心架构 (Architecture)

OpenClaw 的运行依赖于以下几个核心组件：

### 2.1 Gateway (网关)
这是 OpenClaw 的“大脑”和“心脏”。它是一个后台守护进程（Daemon），负责：
-   维护与 LLM 的连接。
-   管理所有 Session（会话）。
-   路由工具调用（Tool Calls）。
-   处理外部触发器（Cron, Webhook）。

**常用命令**:
```bash
openclaw gateway status   # 查看状态
openclaw gateway start    # 启动服务
openclaw gateway restart  # 重启服务 (配置变更后必须)
openclaw gateway logs     # 查看实时日志
```

### 2.2 Session (会话)
每一次对话都是一个 Session。Session 拥有独立的：
-   **Context**: 上下文记忆。
-   **Workspace**: 临时工作目录。
-   **Permissions**: 权限范围。

### 2.3 Skills (技能)
技能是 OpenClaw 的“手”。它们定义了具体的工具（Tools）。
-   **Native Skills**: 内置能力（Read, Write, Exec, Browser）。
-   **User Skills**: 可安装的扩展（如 Obsidian, 1Password, BlueBubbles）。
-   **Skill Location**: 通常位于 `~/.nvm/.../openclaw/skills/` 或用户自定义目录。

### 2.4 Nodes (节点)
OpenClaw 可以连接其他设备作为“节点”。
-   **用途**: 控制另一台电脑的摄像头、屏幕、或者执行命令。
-   **命令**: `nodes` 工具用于管理配对和控制。

---

## 3. 配置指南 (Configuration)

核心配置文件位于：`~/.openclaw/openclaw.json`

### 关键配置项
```json
{
  "agents": {
    "defaults": {
      "model": { "primary": "google-gemini-cli/gemini-3-pro-preview" }, // 模型选择
      "workspace": "/Users/wangbaoqi/.openclaw/workspace" // 工作目录
    }
  },
  "tools": {
    "web_search": { "apiKey": "..." } // 工具特定配置
  },
  "channels": {
    "discord": { "enabled": true, "token": "..." } // 接入渠道
  }
}
```

> **注意**: 修改配置后，必须运行 `openclaw gateway restart` 才能生效。

---

## 4. 高级功能 (Advanced Features)

### 4.1 Memory System (记忆系统)
OpenClaw 的记忆分为两层：
1.  **Short-term**: 当前 Session 的上下文窗口。
2.  **Long-term**: 通过 `MEMORY.md` 和 `memory/` 目录实现的文件记忆。
    *   **Recall**: 在回答复杂问题前，Agent 会主动搜索 (`memory_search`) 这些文件。

### 4.2 Sub-Agents (子智能体)
当任务过于复杂时，可以使用 `sessions_spawn` 孵化子 Agent。
-   **场景**: "帮我研究一下最新的 AI 论文，写个总结。" -> Spawn 一个子 Agent 去浏览网页、阅读、总结，主 Agent 继续陪聊。
-   **特点**: 并行执行，互不阻塞。

### 4.3 Browser Automation (浏览器自动化)
通过 `browser` 工具，OpenClaw 可以控制 Chrome/Headless 浏览器。
-   **能力**: 抓取网页、截图、点击按钮、填写表单。
-   **用途**: 自动化 Web 任务（如订票、爬虫）。

### 4.4 Cron Jobs (定时任务)
通过 `cron` 工具，可以设置定时提醒或任务。
-   **示例**: "每天早上 9 点提醒我看 arXiv 新论文"。

---

## 5. 常用命令速查 (Cheat Sheet)

| 命令 | 描述 |
| :--- | :--- |
| `openclaw status` | 检查整体健康状况 |
| `openclaw doctor` | 诊断环境问题 |
| `openclaw update` | 更新 OpenClaw 到最新版 |
| `openclaw install <skill>` | 安装新技能 (通过 ClawHub) |
| `openclaw session list` | 列出当前活跃会话 |

---

## 6. Atlas 的最佳实践建议

作为您的专属助手 Atlas，我有以下建议：
1.  **明确边界**: 在 `MEMORY.md` 中定义好我不该做的事（如不要随便删文件）。
2.  **善用工具**: 多用 `web_search` 保持信息新鲜，多用 `obsidian` 沉淀知识。
3.  **定期回顾**: 每周检查一下 `memory/` 里的日志，看看我有没有“学”偏了。

---
*Generated by Atlas for NateWang.*
