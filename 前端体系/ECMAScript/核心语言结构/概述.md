
在 ECMAScript 2025 (第16版) 规范的宏观视角下，**核心语言结构（Core Language Structures）** 定义了语言的基础骨架，涵盖了从最底层的数据表示到高层的代码组织方式。这一体系并非单一的语法列表，而是由数据类型、对象模型、执行环境以及语法产生式共同构成的严密系统。

以下是基于规范文档对 ECMAScript 核心语言结构的详细解析：

### 1. 基础构建：数据类型与值 (Data Types and Values)

核心语言结构建立在严格定义的类型系统之上。规范将类型分为两类：直接在语言中操作的**语言类型**和用于描述规范行为的**规范类型**。

- **ECMAScript 语言类型 (Language Types)：** 这是开发者直接操作的值。规范定义了 8 种核心类型：**Undefined, Null, Boolean, String, Symbol, Number, BigInt, 和 Object**。
    
    - **原始值 (Primitive Values)：** 除 Object 外的类型均为原始值，直接在底层表示数据。
    - **对象 (Objects)：** 对象是属性（Property）的集合。它是语言中承载状态和行为的主要实体。
- **规范类型 (Specification Types)：** 这些是“元值（meta-values）”，用于描述算法内部运作（如 `Reference Record` 用于描述赋值目标，`Completion Record` 用于描述控制流），开发者无法直接访问。

### 2. 核心机制：对象模型 (The Object Model)

尽管 ECMAScript 引入了类（Class）语法，但规范明确指出其核心对象模型并非基于类（Class-based），而是**基于对象（Object-based）** 和 **原型继承（Prototype-based Inheritance）** 的。

- **原型链 (Prototype Chain)：** 每个对象都有一个隐式引用（原型），指向其构造函数的 `prototype` 属性。对象通过这种链式结构继承结构、行为和状态。
- **构造器与类 (Constructors and Classes)：** 对象可以通过字面量创建，也可以通过构造函数（使用 `new` 关键字）创建。ECMAScript 的 `class` 定义实际上是一种语法糖，它允许以简洁的方式定义符合内置对象模式的构造函数和原型对象，但其底层仍遵循原型模式。
- **属性 (Properties)：** 对象包含数据属性（拥有值）或访问器属性（拥有 getter/setter 函数），并具有可写性、可枚举性等属性特征（Attributes）。

### 3. 代码组织：脚本与模块 (Scripts and Modules)

ECMAScript 2025 提供了两种顶层的代码组织形式，它们定义了代码如何被解析和执行：

- **脚本 (Scripts)：** 传统的代码组织方式，其代码在全局范围内运行。
- **模块 (Modules)：** 支持将程序分割为多个独立的语句序列。模块具有自己的作用域，总是以严格模式（Strict Mode）运行。
    - **导入与导出：** 模块通过 `import` 和 `export` 声明来明确依赖关系和对外接口。
    - **模块记录 (Module Record)：** 规范使用模块记录来封装模块的结构信息（如导入导出项），用于链接和评估模块图。

### 4. 执行架构：语法与求值 (Syntax and Evaluation)

核心语言结构通过词法（Lexical）和语法（Syntactic）文法定义，并通过运行时语义（Runtime Semantics）执行。

- **语法层级：**
    - **表达式 (Expressions)：** 用于计算值的结构（如左值表达式、更新表达式、运算表达式）。
    - **语句 (Statements)：** 控制执行流的结构（如 `if`, `while`, `break`, `return`）。
    - **声明 (Declarations)：** 定义变量、函数或类的结构（如 `let`, `const`, `function`, `class`）。
- **严格模式 (Strict Mode)：** 语言的一个变体，通过限制某些语法和语义（如禁止 `with` 语句，保留更多关键字）来提供更严格的错误检查和安全性。

### 5. 执行环境 (Execution Contexts)

为了支持上述结构的运行，规范定义了抽象的执行机制：

- **执行上下文 (Execution Contexts)：** 用于跟踪代码的运行时评估。它包含 Realm（领域）、Function（当前执行的函数）以及 ScriptOrModule（当前代码来源）等状态组件。
- **环境记录 (Environment Records)：** 用于记录标识符（变量名、函数名）与其值的绑定关系，形成了作用域链的基础。
- **Agent 与 Realm：** ECMAScript 程序在 Agent 中执行，Agent 包含执行线程和执行上下文栈。Realm 则提供了全局环境和内置对象（如 `Object`, `Array` 等内建库）。

### 总结

ECMAScript 2025 的**核心语言结构**是一个分层的体系：

1. **最底层**是原始数据类型和规范类型；
2. **中间层**是基于原型的对象系统，用于构建复杂的数据结构和逻辑；
3. **上层**是通过脚本和模块组织的语法结构（声明、语句、表达式）；
4. 所有这些都运行在一个由 Agent、Realm 和执行上下文构成的**抽象执行环境**中。

这一结构既保留了作为脚本语言的灵活性（如动态添加属性），又通过类和模块等特性增强了对大型通用编程任务的支持。