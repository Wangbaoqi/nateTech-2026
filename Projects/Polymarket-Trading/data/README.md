# Polymarket 市场数据结构详解

基于 `Gamma API` (GET /markets?slug=...) 返回的 JSON 数据，以下是对核心字段的逐一解析，并标注了它们在 **"Theta Eater" (15m 超短线策略)** 中的重要性。

> **数据源**: `data/market_structure.json`
> **适用策略**: Crypto 15m Binary Options (Up/Down)

---

## 1. 核心身份字段 (Identity)

| 字段名 | 示例值 | 策略重要性 | 解释与用途 |
| :--- | :--- | :--- | :--- |
| `conditionId` | `0xbc98...` | ⭐⭐⭐⭐⭐ | **唯一识别码**。用于在链上或 SDK 中定位市场。去重、下单、查询 Orderbook 全靠它。 |
| `slug` | `eth-updown-15m-1770280200` | ⭐⭐⭐⭐⭐ | **狙击入口**。我们通过计算时间戳构造此字段来“盲狙”市场。包含资产 (`eth`)、类型 (`updown`) 和到期时间戳。 |
| `question` | `"Ethereum Up or Down..."` | ⭐⭐⭐ | 人类可读标题。主要用于日志打印和人工复核。包含日期和具体时间段 (3:30AM-3:45AM ET)。 |
| `clobTokenIds` | `["440...", "103..."]` | ⭐⭐⭐⭐⭐ | **下单凭证**。数组通常包含两个 ID：[0] 是 "Up" (Yes) 的 Token ID，[1] 是 "Down" (No) 的 Token ID。**下单时必须传入对应的 Token ID**。 |

## 2. 规则与结算 (Rules & Resolution)

| 字段名 | 示例值 | 策略重要性 | 解释与用途 |
| :--- | :--- | :--- | :--- |
| `resolutionSource` | `https://data.chain.link...` | ⭐⭐⭐⭐⭐ | **生死判官**。这是结算依据。本例中是 **Chainlink Data Stream**。**极其重要**：如果我们的策略是基于 Binance 价格套利，必须确保 Binance 价格与 Chainlink 价格偏差极小，否则会有预言机风险。 |
| `endDateIso` | `"2026-02-05"` | ⭐⭐ | ISO 格式的结束日期，仅作参考。 |
| `endDate` | `"2026-02-05T08:45:00Z"` | ⭐⭐⭐⭐ | **到期时间**。策略计算 `Time Left` 的基准。注意这是 UTC 时间。 |
| `orderPriceMinTickSize` | `0.01` | ⭐⭐⭐ | 最小价格变动单位。意味着报价只能是 0.01, 0.02... 不能是 0.015。下单价格必须符合此精度。 |
| `orderMinSize` | `5` | ⭐⭐⭐ | 最小下单数量。通常是 5 份 (Shares) 或 5 USDC。资金管理时需注意，太小的单子发不出去。 |

## 3. 市场状态 (Status)

| 字段名 | 示例值 | 策略重要性 | 解释与用途 |
| :--- | :--- | :--- | :--- |
| `active` | `true` | ⭐⭐⭐⭐⭐ | **必须为 true**。如果为 false，说明市场已暂停或结束，不可交易。 |
| `closed` | `false` | ⭐⭐⭐⭐⭐ | **必须为 false**。如果为 true，说明已进入结算流程，无法下单。 |
| `acceptingOrders` | `true` | ⭐⭐⭐⭐ | 是否接受新订单。如果为 false，即使 active=true 也无法下单（可能在维护或结算中）。 |
| `outcomePrices` | `["0.505", "0.495"]` | ⭐⭐ | **参考价格**。这是 Gamma API 缓存的价格（即上次成交价或中间价），**有延迟**。**绝对不能**用这个价格做决策，必须通过 `clobClient.getOrderBook()` 获取实时的 Orderbook 深度。 |

## 4. 辅助信息 (Metadata)

| 字段名 | 示例值 | 策略重要性 | 解释与用途 |
| :--- | :--- | :--- | :--- |
| `liquidity` | `"9785.7504"` | ⭐⭐ | 市场总流动性。流动性太低的市场滑点大，不仅难买，而且难卖。 |
| `volume` | `"186.75"` | ⭐ | 总成交量。 |
| `description` | `"This market will..."` | ⭐ | 详细规则描述。包含对“价格等于起始价算 Up 还是 Down”的定义（通常 >= 算 Up）。 |

## 5. 策略实战应用 (Cheat Sheet)

在 `src/index.js` 的 `evaluate()` 函数中，我们主要关注以下流程：

1.  **定位**: 用 `slug` 找到市场。
2.  **验证**: 检查 `active`, `closed`, `acceptingOrders` 确保可交易。
3.  **取号**: 解析 `clobTokenIds`，拿到 `tokens[1]` (即 "Down" / "No") 的 ID。
4.  **定价**: 忽略 `outcomePrices`，直接调用 `clobClient.getOrderBook(tokenId)` 拿实时卖一价 (Best Ask)。
5.  **风控**: 确认 `resolutionSource` 是 Chainlink (相对稳定)，并对比 Binance 价格。

---
*Generated by Atlas | 2026-02-05*
